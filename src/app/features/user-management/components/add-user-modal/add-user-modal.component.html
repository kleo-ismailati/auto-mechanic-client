<div class="modal-header">
    <h5 class="modal-title">Add User</h5>
    <button
        type="button"
        (click)="cancelAddNewUser()"
        class="btn-close"
        data-bs-dismiss="modal"
        aria-label="Close"
    ></button>
</div>
<div class="modal-body">
    <form [formGroup]="newUserForm">
        <div class="form-group mb-3">
            <label class="form-label">Username</label>
            <div class="input-group">
                <input
                    formControlName="username"
                    placeholder="Username"
                    [ngClass]="{
                        'is-invalid': f.username.errors && f.username.touched
                    }"
                    type="text"
                    class="form-control"
                    aria-label="Username"
                />
            </div>
            <div
                *ngIf="
                    f.username.invalid &&
                    (f.username.dirty || f.username.touched)
                "
                class="text-danger small"
            >
                <div *ngIf="f.username.errors?.['required']">
                    Username is required.
                </div>
                <div *ngIf="f.username.errors?.['minlength']">
                    Username must be at least 3 characters long.
                </div>
                <div *ngIf="f.username.errors?.['maxlength']">
                    Username must be at most 15 characters long.
                </div>
            </div>
        </div>
        <div class="form-group mb-3">
            <label class="form-label">Email</label>
            <div class="input-group">
                <input
                    formControlName="email"
                    placeholder="Email"
                    [ngClass]="{
                        'is-invalid': f.email.errors && f.email.touched
                    }"
                    type="email"
                    class="form-control"
                    aria-label="Email"
                />
            </div>
            <div
                *ngIf="f.email.invalid && (f.email.dirty || f.email.touched)"
                class="text-danger small"
            >
                <div *ngIf="f.email.errors?.['required']">
                    Email is required.
                </div>
                <div *ngIf="f.email.errors?.['email']">
                    Email must be a valid email address.
                </div>
            </div>
        </div>
        <div class="form-group mb-3">
            <label class="form-label">Password</label>
            <div class="input-group">
                <input
                    formControlName="password"
                    pattern="^(?=.*[0-9])(?=.*[a-z])(?=\S+$).{8,}$"
                    placeholder="Password"
                    [ngClass]="{
                        'is-invalid': f.password.errors && f.password.touched
                    }"
                    type="password"
                    class="form-control"
                    aria-label="Password"
                />
            </div>
            <div
                *ngIf="
                    f.password.invalid &&
                    (f.password.dirty || f.password.touched)
                "
                class="text-danger small"
            >
                <div *ngIf="f.password.errors?.['required']">
                    Password is required.
                </div>
                <div *ngIf="f.password.errors?.['pattern']">
                    Password must be 8 characters long, with at least 1
                    lowercase character and no spaces
                </div>
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <button
        type="submit"
        [disabled]="newUserForm.invalid"
        (click)="addNewUser()"
        class="btn btn-sm btn-success"
    >
        Add
    </button>
    <button
        #cancelButton
        type="button"
        (click)="cancelAddNewUser()"
        class="btn btn-sm btn-secondary"
    >
        Cancel
    </button>
</div>
